{
  "JSBSim": {
    "SimFmuPort": "ptySimSoc",
    "SimFmuBaud": 1500000
  },

  "Sensors": [
    {"Type": "Time", "Output": "Fmu/Time_us"},
    {"Type": "InputVoltage", "Output": "Fmu/Voltage/Input_V"},
    {"Type": "RegulatedVoltage", "Output": "Fmu/Voltage/Regulated_V"},
    {"Type": "InternalMpu9250", "Output": "Fmu/Mpu9250", "Rotation": [-1,0,0,0,-1,0,0,0,1], "SRD": 19, "DLPF-Bandwidth": "20Hz"},
    {"Type": "InternalBme280", "Output": "Fmu/Bme280"},
    {"Type": "Sbus", "Output": "Sbus"},
    {"Type": "uBlox", "Output": "uBlox", "Uart": 4, "Baud": 115200}
  ],

  "Effectors": [
    {"Type": "Motor", "Input": "/Control/cmdFR_nd", "Channel": 0, "Calibration": [900, 1100], "Safed-Command": 0},
    {"Type": "Motor", "Input": "/Control/cmdAL_nd", "Channel": 1, "Calibration": [900, 1100], "Safed-Command": 0},
    {"Type": "Motor", "Input": "/Control/cmdFL_nd", "Channel": 2, "Calibration": [900, 1100], "Safed-Command": 0},
    {"Type": "Motor", "Input": "/Control/cmdAR_nd", "Channel": 3, "Calibration": [900, 1100], "Safed-Command": 0}
  ],

  "Telemetry": {
    "Uart": "/dev/ttyO2",
    "Baud": 115200,
    "Time": "/Sensors/Fmu/Time_us",
    "Static-Pressure": "/Sensors/Fmu/Bme280",
    "Airspeed": "/Sensor-Processing/vIAS_ms",
    "Altitude": "/Sensor-Processing/hBaro_m",
    "Filter": "/Sensor-Processing",
    "Gps": "/Sensors/uBlox",
    "Imu": "/Sensors/Fmu/Mpu9250",
    "Sbus": "/Sensors/Sbus",
    "Power": "/Sensor-Processing"
  },

  "Sensor-Processing": {
    "Fmu": "Standard",
    "Baseline": "Standard",
    "Test": [],

    "Def": {
      "Standard": [
        {"Type": "AGL", "Output": "hBaro_m",
          "Static-Pressure": ["/Sensors/Fmu/Bme280/Pressure_Pa"], "Initialization-Time": 10},
        {"Type": "Constant", "Output": "vIAS_ms", "Constant": 0.0},
        {"Type": "EKF15StateINS", "Output": "INS",
          "Time": "/Sensors/Fmu/Time_us", "GPS": "/Sensors/uBlox", "IMU": "/Sensors/Fmu/Mpu9250"},
        {"Type": "MinCellVolt", "Output": "MinCellVolt_V",
          "Inputs": ["/Sensors/Fmu/Voltage/Input_V"],
          "NumCells": [4]
        }
      ]
    }
  },

  "Route": {
    "InputDef": {
      "Lat": "/Sensor-Processing/Latitude_rad",
      "Lon": "/Sensor-Processing/Longitude_rad",
      "Alt": "/Sensor-Processing/Altitude_m",
      "Heading": "/Sensor-Processing/Heading_rad",
      "VelNorth": "/Sensor-Processing/NorthVelocity_ms",
      "VelEast": "/Sensor-Processing/EastVelocity_ms",
      "VelDown": "/Sensor-Processing/DownVelocity_ms"
    },

    "OutputDef": {
      "AltRef": "refAlt_m",
      "AltError": "errAlt_m",
      "Crosstrack": "crosstrack_m",
      "HeadingRef": "refHeading_rad",
      "HeadingLead": "refHeadingLead_rad",
      "HeadingError": "errHeading_rad"
    },

    "WaypointDef": {
      "Home": {"Waypoint": [44.725801, -93.075866, 285.2111], "WaypointRef": "WGS84_deg"}
    },

    "RouteDef": {
      "Loiter": {
        "Type": "CircleHold", "Radius": 400, "Direction": "Left",
        "Waypoint": [0.0, 0.0, -75], "LeadDist": 60, "HoldDist": 20
      },

      "Path_1": {
        "Type": "Waypoints", "LeadDist": 60, "HoldDist": 20,
        "WaypointList": [
          [400, 0, -75],
          [0, 400, -75],
          [-400, 0, -75],
          [0, -400, -75] ]
      }
    }
  },

  "Control": {
    "Fmu": ["PilotDirect"],
    "Baseline": ["PilotRate", "PilotAttitude"],
    "Test": ["PilotAttitude", "Pendulator"],

    "GroupDef": {
      "PilotDirect": {"Pilot": "Direct"},
      "PilotRate": {
        "Pilot": "Pilot-Rate", "SCAS": "SCAS-Rate", "Alloc": "Allocator"},
      "PilotAttitude": {
        "Pilot": "Pilot-Attitude", "SCAS-Att": "SCAS-Attitude", "SCAS": "SCAS-Rate", "Alloc": "Allocator"},
      "Pendulator" : {
        "Pilot": "Pilot-Attitude", "Rigid-Att": "Rigid_SS" }
    },

    "ControlDef": {
      "Rigid_SS": [
        {"Type": "Sum", "Inputs": ["../refPhi", "/Sensor-Processing/Roll_rad"], "Output": "PhiErr_rad", "Gains": [1.0, -1.0]},
        {"Type": "Sum", "Inputs": ["../refTheta", "/Sensor-Processing/Pitch_rad"], "Output": "ThetaErr_rad", "Gains": [1.0, -1.0]},
        {"Type": "Sum", "Inputs": ["../refYaw", "/Sensor-Processing/Heading_rad"], "Output": "PsiErr_rad", "Gains": [1.0, -1.0]},

        {"Type": "Gain", "Input": "/Sensors/Fmu/Mpu9250/GyroX_rads", "Output": "PErr_rads", "Gain": -1.0},
        {"Type": "Gain", "Input": "/Sensors/Fmu/Mpu9250/GyroY_rads", "Output": "QErr_rads", "Gain": -1.0},
        {"Type": "Gain", "Input": "/Sensors/Fmu/Mpu9250/GyroZ_rads", "Output": "RErr_rads", "Gain": -1.0},

        {"Type": "SS", "dt": 0.02,
          "Inputs": ["PhiErr_rad", "ThetaErr_rad", "PsiErr_rad", "PErr_rads", "QErr_rads", "RErr_rads"],
          "Outputs": ["cmdFR_nd", "cmdAL_nd", "cmdFL_nd", "cmdAR_nd"],
          "A": [
            [ 0.0017572297098505747, 2.51604054355129E-10, 5.4431998595885076E-9, 0.021691037633442614, 1.836665755792022E-11, 8.71168308233985E-12, -0.017005411341788457, -1.4313317044530902E-11, -4.5029605587305839E-12, -0.00020112319771379119, 0.00020112318183827221, 0.00020112319663404183, -0.00020112318064061577, 0.588820526493204, -4.9895123082680612E-10, -5.6531065312781551E-9, 0.012090935709103681, -1.6239805097308669E-11, -3.208777149424284E-9, 0.035889913264501166, -7.3520399205415777E-11, -5.5094867780722621E-9, 0.00841648207135986, -1.2717468485400983E-11, -5.229516927575449E-9 ],
            [ -5.4498058392531331E-11, 0.022608399600981422, 1.5915588513926031E-12, -6.2095283327892572E-12, 0.035958781765378846, 1.7722006629181685E-14, 4.9422167396563565E-12, -0.028218673550275044, -4.612788226481086E-14, 4.3696658688174174E-6, -4.36966594674239E-6, 4.369666917298702E-6, -4.3696669866994435E-6, 1.40519283397561E-10, 0.35541307902068459, -1.7344947385680355E-12, 1.4538144038953023E-11, 0.0086542754070067073, -1.1471121977162503E-12, -6.210986949522135E-11, 0.24434661974234267, -2.1334268054844238E-12, 1.1668385394502017E-11, 0.014114257252057635, -1.9501813051467517E-12 ],
            [ 7.7597131565109918E-8, 2.6283498870271545E-11, 0.23768754861953312, 5.2336044146174523E-9, 6.6615865426722276E-12, 0.0020735698909019897, -4.1456421296096882E-9, -5.1872021117433821E-12, -0.00068721437575126974, -7.871433812573066E-6, -7.87222064820154E-6, 7.87143490221849E-6, 7.8722195593407369E-6, -1.4788011620932629E-7, -1.2297521894429033E-10, 0.55722811021962215, -1.2215157261800506E-8, 1.9253943874857441E-11, 0.0058508129007353513, -2.2150910515755594E-8, 1.53957072311664E-11, 0.41729916132046296, -1.6189941188298431E-8, 3.7231185140011941E-11, 0.00014303981885402758 ],
            [ -0.11279663836641211, -5.3771243200332284E-10, -1.2119799251072476E-8, 0.98657503884874675, -4.2978170251097919E-11, -2.0123552526567435E-11, 0.0085696416911229811, 3.3758909611041555E-11, 1.0566081652082064E-11, -0.00013527827734741859, 0.00013527831521886912, 0.00013527828000967727, -0.00013527831794048342, 0.26393573131533504, 1.1245784014268052E-9, 1.2715035051928833E-8, 0.0026775516794873347, 3.729692215505477E-11, 7.3638271787715024E-9, 0.017223100700565888, 5.2306955156277971E-11, 1.0253734177016673E-8, -0.0041031352152034887, 2.4792550739730711E-11, 1.0955985366514774E-8 ],
            [ -3.162471695377952E-9, -0.78916816918400634, 1.2097531889986609E-11, -2.29465007860929E-10, 0.92915496383355178, -3.3847236165694163E-14, 1.8186016522506015E-10, 0.053641735974174508, 7.5473393892810982E-14, 0.00081233951156838079, -0.0008123395115421, 0.00081233954720343288, -0.00081233954694919094, 6.2869156628418242E-9, 1.7264092131750663, -1.1869765755890977E-11, 5.3683766841029642E-10, 0.01615883227066961, -2.2246586106957679E-11, -9.425451582441969E-11, 0.20657225825070333, -1.774014407632708E-11, 6.3011021295081E-10, -0.026465525048190865, -3.5664228717373582E-11 ],
            [ -2.5741126214715921E-7, -1.2780808859699758E-10, 0.00656515979324098, -1.7330019834626952E-8, -2.5154758810629238E-11, 0.997505739397502, 1.3728523558002019E-8, 1.9523395487290214E-11, -5.2416049193984922E-6, -1.60756116443219E-7, -1.5813467849707525E-7, 1.6075270171326843E-7, 1.5813809323295868E-7, 4.9010710808664907E-7, 4.8833958099662834E-10, -0.0068817062084653765, 4.0715057070683483E-8, -6.10289499893232E-11, -2.6937315818487342E-5, 7.316392833826398E-8, -3.8308905561662818E-11, -0.0066292215884300263, 5.4032491694282359E-8, -1.2099318755898195E-10, 9.5329866095366427E-5 ],
            [ -0.028187786019775771, 2.2966651679437026E-10, 3.5399386630636134E-9, -0.065218500936869733, 7.6649025949528336E-12, 2.3563233589339958E-12, 1.0476873474152335, -6.2721778204957786E-12, -7.6242651675983053E-13, 0.00822432720657639, -0.0082243272085615014, -0.00822432720700308, 0.0082243272086229072, 0.99122066663266684, -3.0437321468977982E-10, -3.0710560131513043E-9, -0.28496246097527012, -5.7944708256990412E-12, -1.1298604928196155E-9, -0.27246963665385127, -1.1360982208929336E-9, -1.9666062134466032E-8, -0.52404102098818772, -2.853832181181855E-11, -8.2288034581573258E-9 ],
            [ 3.2454237675136385E-10, -0.022218279187931567, 3.0429265915597292E-12, 1.04514219777668E-11, -0.065126896135431211, -3.2744104916598634E-14, -8.5867392634841452E-12, 1.0476155462470329, 8.3972564528374011E-14, -0.0082250877118241819, 0.0082250877119571485, -0.0082250877122768528, 0.0082250877124184323, -4.2733354113310541E-10, 0.98512963587425262, -2.7426251125640455E-12, -1.4616990865097481E-11, -0.28497319061386506, -3.765099051109334E-13, -1.5276936579815253E-9, -0.31653850119676569, -8.82001017209911E-12, -8.8719478134863114E-11, -0.52393115047314787, 1.8444665833537377E-13 ],
            [ -1.6523342549637226E-9, 1.6874481187204097E-13, -0.00010745317082790845, -9.1504704067360647E-11, -1.073889281453083E-14, -0.00020726591954602582, 7.3127985300225259E-11, 1.5908749886653795E-14, 0.99748083027911427, -0.00037556162603179677, -0.00037556160067262579, 0.00037556162602376766, 0.00037556160068049179, 2.8660397218144924E-9, 1.7071923579881898E-13, 0.0021123441318139625, 4.0232315929377354E-10, -1.2791537797216453E-13, -0.15113648912436345, -1.8288729914328213E-10, -3.7877351501450115E-13, -0.00016096298060126187, 5.5562636986459977E-10, -1.5197900226971648E-13, -0.24940027277541063 ],
            [ -0.10511058104349616, -1.2033745011920134, 0.13617925823612773, -3.294515666827913, 3.2462635468033256, 0.37269368021078636, 2.5358820094422687, -2.4980484910122569, 0.016218333400893774, 0.555797974120384, 0.32286429435386232, 0.0564127543731483, 0.055544473180549163, 48.760910225713694, -46.906539421216372, -3.7558713056951163, 0.999423362762911, -0.99054960419299587, -1.2464310336320605, -4.2547109983746561, 7.4767589077490957, 0.22080103433059486, -1.2761266042372903, 1.25245941340584, -0.0038848887887494941 ],
            [ 0.10510975452515416, 1.2033745006758745, 0.13617851348064883, 3.2945156284104473, -3.2462635455481204, 0.37269367928754266, -2.535881978718, 2.4980484897113491, 0.016218333815519608, 0.32286429314823223, 0.555797976706956, 0.055544474392191068, 0.056412751844681287, -48.76090892259171, 46.906539400355868, -3.7558705769806906, -0.99942328572924521, 0.99054960397060687, -1.246430672209687, 4.254712417433594, -7.4767589035436508, 0.22080254702004035, 1.276126806317782, -1.2524594131631528, -0.003883923988430842 ],
            [ 0.10511053460713481, -1.203374540272828, -0.13617925849882528, 3.2945156624660172, 3.2462635446259549, -0.3726936802195141, -2.5358820055549196, -2.4980484892459658, -0.016218333405566956, 0.056412754306647384, 0.055544473266299195, 0.555797974319213, 0.32286429417200746, -48.760910115991308, -46.906539353673416, 3.7558713060075433, -0.999423358128736, -0.99054960224836675, 1.2464310336335878, 4.2547110421382426, 7.4767589608234006, -0.22080103382734004, 1.2761266127909359, 1.2524594166027978, 0.0038848887145201813 ],
            [ -0.10510970852337978, 1.2033745402758802, -0.13617851322674285, -3.2945156275481442, -3.2462635432537046, -0.37269367930308128, 2.5358819784120556, 2.4980484879109111, -0.016218333803379809, 0.055544474435861885, 0.056412751782983751, 0.3228642929821115, 0.5557979768537068, 48.7609088719827, 46.906539331780259, 3.755870576829595, 0.99942328135996106, 0.99054960227604494, 1.2464306722315106, -4.2547124681390986, -7.47675895724884, -0.22080254753746492, -1.2761268166717106, -1.252459415524567, 0.0038839240607851937 ],
            [ 0.0023629772254102174, 4.2626798083596461E-10, 9.3970624163438975E-9, 0.0046892167283624749, 3.3340682780139825E-11, 1.5354630625344253E-11, -0.0036098773320826292, -2.6223234051686484E-11, -7.99157379608853E-12, -0.00055618698947805122, 0.00055618696092158077, 0.00055618698744291277, -0.00055618695886018761, 0.9284338208720242, -8.80774226835607E-10, -9.81966955858889E-9, 0.018563347865414831, -2.8628387093504689E-11, -5.6393596999998285E-9, 0.018754662860919008, -6.0311322833713889E-11, -8.3898547631163021E-9, 0.0016607737400458902, -1.98017140490279E-11, -8.6590860336606254E-9 ],
            [
            2.4375744833014926E-10, 0.0021242121509113293, 4.1069216114245486E-12, 1.852175444362144E-11, 0.0047116490751514051, 1.1351892426212772E-14, -1.4620683052954765E-11, -0.0036272609250143383, -9.5889980626930723E-15, 0.0005579708115517869, -0.00055797081156690621, 0.00055797080921669688, -0.00055797080922143137, -4.96878622114711E-10, 0.92826882740222838, -4.3226666892392017E-12, -3.5242698692096195E-11, 0.018626250902435412, -1.0564708259656416E-12, 3.5833666712407258E-11, 0.021988494202859244, -3.7521087039984941E-12, -3.8853587531292075E-11, 0.0017787805494097048, -1.7111061642725335E-12 ],
            [ 1.057967439705214E-7, 3.6000161162814969E-11, 5.6401419473601854E-5, 7.1374966100273133E-9, 9.0913612983773868E-12, 2.9976621587357607E-5, -5.6537699210388525E-9, -7.0433427818366685E-12, 1.2717311237350761E-6, 5.16579393010204E-5, 5.1656866968268241E-5, -5.1657937814688262E-5, -5.16568684545768E-5, -2.0165265421213138E-7, -1.6729916447629307E-10, 0.99965256590927365, -1.664832889291786E-8, 2.6271150545953297E-11, 0.019877382157709008, -3.011271902610314E-8, 2.097800958820833E-11, -1.8612857706396538E-5, -2.206669256520835E-8, 5.0753854589891357E-11, -3.9572363777042452E-5 ],
            [ 0.16938814062727667, -2.91070158995146E-9, -4.9239591704554933E-8, 0.63892541034306749, -1.2298043689856306E-10, -4.4930484548896396E-11, -0.49178628911790173, 9.9099470625965E-11, 1.7758981769317078E-11, -0.045800639172956459, 0.04580063922966509, 0.045800639179756054, -0.04580063923288908, -9.6043674445701921, 4.3260155037860414E-9, 4.5380379797264737E-8, 0.8136706348293925, 9.8758882217996514E-11, 1.9944596586005952E-8, 1.9386070127311645, 9.0271899677734748E-9, 1.8014258512319086E-7, 0.24739588635705673, 2.8721429058504563E-10, 8.8460989523458646E-8 ],
            [ -3.8282433583013615E-9, 0.045755210694450155, -1.7251267177450552E-11, -1.586644352566027E-10, 0.635911480219732, 3.4997111156794563E-13, 1.2850457196157281E-10, -0.48942372368192988, -8.3058840770256327E-13, 0.045825192041127942, -0.045825192042441752, 0.045825192051855666, -0.045825192053220505, 5.6769125627573795E-9, -9.4564131130428475, 1.3791406432636575E-11, 2.52655458099978E-10, 0.814121289221755, 8.2237723769048289E-14, 1.0817433807760466E-8, 2.5195902983269844, 6.317269878587193E-11, 9.2296795717974939E-10, 0.24535874061907414, -6.8740665854537871E-12 ],
            [ -4.1473601817790959E-9, -1.2542904839270024E-12, 0.0020076512714970666, -1.342896641593284E-10, -2.5286761412172394E-13, 0.0043874079132448108, 1.0583517854622718E-10, 2.9460145271864484E-14, 0.00019134765049127185, 0.0049531905325096636, 0.0049531905432152051, -0.0049531905325236169, -0.0049531905431978015, 5.5540498931303641E-9, 1.4166349857239528E-12, -0.04451263915215127, 2.75521742323437E-10, -4.6828010796669892E-13, 0.98549568325447578, 1.3526361496400286E-8, 3.209530547490447E-12, 0.0031496626697033103, 1.1535115194028292E-9, -2.2999326686742447E-12, -4.595469615179623E-5 ],
            [ 3.6460844826575091E-5, 6.8423500272746734E-12, 1.5072394117073012E-10, 7.0123074400054212E-5, 5.3436676967939066E-13, 2.4600569269077606E-13, -5.3983088739205242E-5, -4.2031028464433308E-13, -1.2799510504532674E-13, -8.53648187999546E-6, 8.5364814226789E-6, 8.536481847382699E-6, -8.5364813896735111E-6, 0.014928710549348972, -1.412490335004066E-11, -1.5745536446315427E-10, 0.000290441579653017, -4.5878894547982651E-13, -9.0378314646631718E-11, 0.00028484692545023836, -1.0354592063380958E-12, -1.3563056710630281E-10, 2.4673397294021015E-5, -3.1903708794543394E-13, -1.3922279552661492E-10 ],
            [ 3.929298435477048E-12, 3.3549893746098668E-5, 6.5840782406117444E-14, 2.97537114481669E-13, 7.0503272598736552E-5, 1.7893831345949173E-16, -2.3489452212164811E-13, -5.4277907256646514E-5, -1.4704381671061857E-16, 8.56485183503284E-6, -8.56485183526466E-6, 8.56485179759269E-6, -8.5648517976579628E-6, -7.9929873546193339E-12, 0.014924998272854916, -6.9265890577943619E-14, -5.6576715721938812E-13, 0.00029144493792173059, -1.6904486262707036E-14, 4.8835584096855094E-13, 0.00033214681467095137, -6.0522800990892138E-14, -6.2874325979805489E-13, 2.6576395940514486E-5, -2.7325009805433804E-14 ],
            [ 1.6927792710308778E-9, 5.7601204050234821E-13, 8.8697000911049427E-7, 1.1420094104836761E-10, 1.4546367124052752E-13, 4.4616855037818328E-7, -9.0461103070773173E-11, -1.1269367977008581E-13, 1.888837418871274E-8, 7.8776990600395617E-7, 7.8775274860217278E-7, -7.8776988222254066E-7, -7.87752772383237E-7, -3.2264841293707263E-9, -2.6767967736711495E-12, 0.015994780603265136, -2.6637530149001348E-10, 4.2034188783234585E-13, 0.00031014866244952904, -4.8190851037831521E-10, 3.3562315029754934E-13, -3.2201672598343686E-7, -3.5307586196587925E-10, 8.1207915244535756E-13, -6.3280729851264362E-7 ],
            [ 0.005339726630322581, -8.3581857919334055E-11, -1.3975910501374525E-9, 0.018809192765223245, -3.4156733306735995E-12, -1.2260993577588148E-12, -0.014477558595723226, 2.7563289137127772E-12, 4.7692265131384561E-13, -0.0014326193365926966, 0.0014326193381035506, 0.0014326193367810965, -0.0014326193381866755, -0.28309217680556831, 1.2226387859884542E-10, 1.2792830513621143E-9, 0.026531093381139747, 2.7375007297904554E-12, 5.5409109415655486E-10, 0.059691825206380972, 2.7459146851763135E-10, 5.3773766183924329E-9, 0.007282814423693133, 8.4891239629367618E-12, 2.591830769434204E-9 ],
            [ -1.1111864535014262E-10, 0.0019936894986911911, -4.9017459108034863E-13, -4.4577217711613285E-12, 0.018733613079252923, 1.0344365772355608E-14, 3.614660153492756E-12, -0.014418316165243614, -2.4484022477584589E-14, 0.0014332207395594955, -0.0014332207395981985, 0.001433220739849154, -0.0014332207398893716, 1.6228938575930472E-10, -0.27919570193866122, 3.86512461485273E-13, 7.032911342565657E-12, 0.026541761543610119, 4.7696436139406E-15, 3.3320817723883652E-10, 0.076621761818842241, 1.8901900277088336E-12, 2.7173402375705503E-11, 0.0072281526059656247, -2.0175392978354249E-13 ],
            [ -1.1862877334020413E-10, -3.5743015455364575E-14, 5.9418041029416544E-5, -3.6936026618661994E-12, -7.1334072237656234E-15, 0.00012756003421146066, 2.910569623595377E-12, 6.8705818822604095E-16, 5.5643592205249338E-6, 0.00015150524016449413, 0.00015150524044796234, -0.00015150524016486293, -0.00015150524044749321, 1.5635855078089093E-10, 3.7247479920745257E-14, -0.0012949383287797749, 7.5613299016530554E-12, -1.2937565636113121E-14, 0.03157872477319551, 4.0716740644822406E-10, 9.6784064508976381E-14, 9.29692816172635E-5, 3.3415928772124067E-11, -6.6441860121228835E-14, -1.3346429143168057E-6 ]
          ],
          "B": [
            [ 0.90389960289815363, -2.4563278983259925E-10, -5.7162781291048675E-9, -5.5431867973827386E-5, -1.2629144393280321E-11, -3.3214261633915485E-9],
            [ 5.7401537157236784E-11, 0.87647880799876821, -1.6400498087582755E-12, 1.3887145232885698E-11, 5.030156649480307E-6, -1.2854885658900232E-12 ],
            [ -7.8149439829801212E-8, -1.9117280964326768E-11, 0.57504076263721859, -1.1697260003877517E-8, 2.2157405128783658E-11, -1.8417297501820491E-5 ],
            [ 0.4285482979436871, 5.26201312864041E-10, 1.2823972148138857E-8, 0.00012615053760439712, 2.88706930432318E-11, 7.5862144211385457E-9 ],
            [ 3.2238667832402907E-9, 1.0767647586846698, -1.2561495749150055E-11, 5.1119421504792708E-10, 0.00026042774448794908, -2.3184288540686147E-11 ],
            [ 2.5931033058304596E-7, 1.0305776052172175E-10, 0.15289600312909118, 3.901659225115235E-8, -7.1226880828657315E-11, 6.0215356908922588E-5 ],
            [ -0.0609611624449916, -2.0938486860374892E-10, -3.3736974329546018E-9, -1.9536258106670169E-5, -5.4774814004362572E-12, -1.3820143072645396E-9 ],
            [ -2.9681795788611185E-10, -0.066451640976288417, -3.102847493213227E-12, -1.5742136491318262E-11, -9.5059408205197989E-6, -1.8261923089232556E-13 ],
            [ 1.7158349444165395E-9, -1.9140159126017304E-13, -3.65204736742746E-5, 4.0411991066365167E-10, -1.3927886198683797E-13, 8.553073439919543E-7 ],
            [ -4.6441412708855871, 5.861721980703992, 0.12560854179015415, -0.0032196400930594874, 0.0013451805761395855, 5.9473942784393514E-5 ],
            [ 4.644142056374081, -5.8617219784059431, 0.12560929122868925, 0.0032197161173846429, -0.0013451807187117128, 5.9861006209829974E-5 ],
            [ 4.6441413126226339, 5.86172201748617, -0.12560854153111828, 0.0032196444022285385, 0.0013451821922119212, -5.9473973732199735E-5 ],
            [ -4.6441421026633787, -5.8617220155473486, -0.12560929149550004, -0.0032197204297936075, -0.0013451820486650129, -5.9860975264912163E-5 ],
            [ 0.0040121265472606729, -4.1590228443183562E-10, -9.9109580914630958E-9, -9.700380375575422E-5, -2.2132265774750197E-11, -5.8192017534889234E-9 ],
            [ -2.4589379375535277E-10, 0.0042455952238434668, -4.3261705369232356E-12, -3.2695147725944515E-11, -2.4405510250280349E-5, -1.0742031584045107E-12 ],
            [ -1.0654702333972212E-7, -2.6240349787167278E-11, -3.7755991953870261E-5, -1.5941444382724108E-8, 3.0231317541103732E-11, -2.51284618364343E-5 ],
            [ 0.71584525409640865, 2.6877930890063226E-9, 4.806979706079905E-8, 0.00037494536281299212, 8.5792474695197666E-11, 2.253747790145924E-8 ],
            [ 3.5572147269449455E-9, 0.83009044373638452, 1.710189721595954E-11, 2.5385244730612567E-10, 0.00015840336788333967, -1.8197432534688513E-12 ],
            [ 3.8821936474438177E-9, 8.7819817062298115E-13, 0.0010473557393021176, 2.8561652059141423E-10, -5.4719226241782125E-13, 4.4479320328841977E-7 ],
            [ 5.875629822027707E-5, -6.6747912813931437E-12, -1.5893683079752861E-10, -1.5548639679190544E-6, -3.5475765039256278E-13, -9.32757196273978E-11 ],
            [ -3.9613839346552779E-12, 6.1652008487767955E-5, -6.9347448251905559E-14, -5.2502153046259857E-13, -3.916732308197987E-7, -1.7173637718976884E-14 ],
            [ -1.7047817070086113E-9, -4.1985221900120112E-13, -6.1193115302288011E-7, -2.5506523167018238E-10, 4.8370515054656564E-13, -4.0205869327078967E-7 ],
            [ 0.0206453538909963, 7.7052783382460481E-11, 1.3599713007032444E-9, 1.049101578826671E-5, 2.4005666647954143E-12, 6.306080863569471E-10 ],
            [ 1.0303726607532124E-10, 0.0237342338307163, 4.8460050115897532E-13, 7.1123276123268689E-12, 4.43798869254307E-6, -5.09743954554271E-14 ],
            [ 1.1084439741754542E-10, 2.5035490285339302E-14, 2.9343340513652042E-5, 7.8939205388465853E-12, -1.5165933016519211E-14, 1.2277906139775684E-8 ]
          ],
          "C": [
            [ -0.0001263140057589369, 0.00012631400576655914, 4.7908248369696433E-6, -9.0073850316736256E-5, 9.0073850322137372E-5, 6.8192587835953415E-6, 6.9305856764165189E-5, -6.93058567681729E-5, 2.9914274059415905E-7, 0.015175216498896259, 7.0430053946820039E-6, 9.625571437178587E-7, 9.6255714382900657E-7, 0.0014410326109892413, -0.0014410326110627528, -7.0298568736852315E-5, 2.4743636712775291E-5, -2.4743636713232618E-5, -2.2048872290294764E-5, 4.5039754986376944E-5, -4.5039754989079359E-5, -1.7049218189399162E-6, -3.4657307011150352E-5, 3.465730701297354E-5, -7.479492867821263E-8 ],
            [ 0.00012631400571536718, -0.00012631400573483563, 4.790824837040047E-6, 9.0073850285763419E-5, -9.00738502995792E-5, 6.8192587836895748E-6, -6.9305856732294687E-5, 6.9305856745324981E-5, 2.9914274062723473E-7, 7.0430053946937149E-6, 0.01517521649889716, 9.62557144326513E-7, 9.6255714408059039E-7, -0.0014410326104242453, 0.0014410326106559965, -7.0298568737273243E-5, -2.4743636710092043E-5, 2.474363671121346E-5, -2.2048872291187713E-5, -4.5039754970899477E-5, 4.5039754977801373E-5, -1.7049218189584005E-6, 3.4657306995169212E-5, -3.4657307001539571E-5, -7.479492869772905E-8 ],
            [ 0.00012631400570546172, 0.0001263140057581746, -4.7908248370356975E-6, 9.0073850278709329E-5, 9.0073850316284957E-5, -6.8192587836954032E-6, -6.930585672651383E-5, -6.9305856762352254E-5, -2.991427407713622E-7, 9.625571437273946E-7, 9.6255714434224035E-7, 0.015175216498896879, 7.0430053945407281E-6, -0.0014410326103196033, -0.0014410326109585588, 7.0298568737615431E-5, -2.474363670951436E-5, -2.4743636712636523E-5, 2.2048872290940606E-5, -4.5039754967365209E-5, -4.5039754986153165E-5, 1.7049218189607487E-6, 3.4657306992322294E-5, 3.465730701029123E-5, 7.4794928728779252E-8 ],
            [ -0.00012631400574773352, -0.00012631400572496562, -4.7908248372504017E-6, -9.0073850308742569E-5, -9.007385029268254E-5, -6.81925878399509E-6, 6.9305856755970857E-5, 6.93058567397318E-5, -2.9914274032968577E-7, 9.6255714381964919E-7, 9.62557144084716E-7, 7.0430053945707105E-6, 0.015175216498896764, 0.001441032610844118, 0.0014410326105562317, 7.02985687393388E-5, 2.4743636712122357E-5, 2.474363671070023E-5, 2.2048872290943425E-5, 4.5039754982392725E-5, 4.5039754974349341E-5, 1.7049218190389343E-6, -3.46573070070079E-5, -3.46573069989878E-5, 7.47949286172031E-8 ]
          ],
          "D": [
            [ 0, 0, 0, 0, 0, 0 ],
            [ 0, 0, 0, 0, 0, 0 ],
            [ 0, 0, 0, 0, 0, 0 ],
            [ 0, 0, 0, 0, 0, 0 ]
          ]
        },

        {"Type": "Sum", "Inputs": ["../refNorm", "cmdFR_nd"], "Output": "cmdFR_nd", "Gains": [1.0, 1.0], "Limits": {"Lower": 0.025, "Upper": 1}},
        {"Type": "Sum", "Inputs": ["../refNorm", "cmdAL_nd"], "Output": "cmdAL_nd", "Gains": [1.0, 1.0], "Limits": {"Lower": 0.025, "Upper": 1}},
        {"Type": "Sum", "Inputs": ["../refNorm", "cmdFL_nd"], "Output": "cmdFL_nd", "Gains": [1.0, 1.0], "Limits": {"Lower": 0.025, "Upper": 1}},
        {"Type": "Sum", "Inputs": ["../refNorm", "cmdAR_nd"], "Output": "cmdAR_nd", "Gains": [1.0, 1.0], "Limits": {"Lower": 0.025, "Upper": 1}}
      ],

      "Direct": [
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/7", "Output": "cmdFR_nd", "Gain": 1, "Limits": {"Lower": 0, "Upper": 1}},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/7", "Output": "cmdAL_nd", "Gain": 1, "Limits": {"Lower": 0, "Upper": 1}},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/7", "Output": "cmdFL_nd", "Gain": 1, "Limits": {"Lower": 0, "Upper": 1}},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/7", "Output": "cmdAR_nd", "Gain": 1, "Limits": {"Lower": 0, "Upper": 1}}
      ],

      "Pilot-Attitude": [
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/7", "Output": "refNorm", "Gain": 1.0},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/3", "Output": "refPhi", "Gain": 0.523599},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/4", "Output": "refTheta", "Gain": 0.523599},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/5", "Output": "refYaw", "Gain": 1.0}
      ],

      "SCAS-Attitude": [
        {"Type": "PID2", "Reference": "../refPhi", "Feedback": "/Sensor-Processing/Roll_rad", "Output": "refRoll",
          "Kp": 0.500, "Ki": 0.000, "Kd": 0.100, "dt": 0.02},

        {"Type": "PID2", "Reference": "../refTheta", "Feedback": "/Sensor-Processing/Pitch_rad", "Output": "refPitch",
          "Kp": 0.500, "Ki": 0.000, "Kd": 0.100, "dt": 0.02}
      ],

      "Pilot-Rate": [
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/7", "Output": "refNorm", "Gain": 1.0},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/3", "Output": "refRoll", "Gain": 1.0},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/4", "Output": "refPitch", "Gain": 1.0},
        {"Type": "Gain", "Input": "/Sensors/Sbus/Channels/5", "Output": "refYaw", "Gain": 1.0}
      ],

      "SCAS-Rate": [
        {"Type": "Gain", "Input": "../refNorm", "Output": "cmdNorm", "Gain": 1.0},

        {"Type": "Gain", "Input": "../refRoll", "Output": "cmdRoll_ff", "Gain": 0.0},
        {"Type": "PID2", "Reference": "../refRoll", "Feedback": "/Sensors/Fmu/Mpu9250/GyroX_rads", "Output": "cmdRoll_pid",
          "Kp": 0.0125, "Ki": 0.000, "Kd": 0.001, "dt": 0.02},
        {"Type": "Sum", "Inputs": ["cmdRoll_ff", "cmdRoll_pid"], "Output": "cmdRoll"},

        {"Type": "Gain", "Input": "../refPitch", "Output": "cmdPitch_ff", "Gain": 0.0},
        {"Type": "PID2", "Reference": "../refPitch", "Feedback": "/Sensors/Fmu/Mpu9250/GyroY_rads", "Output": "cmdPitch_pid",
          "Kp": 0.0125, "Ki": 0.000, "Kd": 0.001, "dt": 0.02},
        {"Type": "Sum", "Inputs": ["cmdPitch_ff", "cmdPitch_pid"], "Output": "cmdPitch"},

        {"Type": "Gain", "Input": "../refYaw", "Output": "cmdYaw_ff", "Gain": 0.0},
        {"Type": "PID2", "Reference": "../refYaw", "Feedback": "/Sensors/Fmu/Mpu9250/GyroZ_rads", "Output": "cmdYaw_pid",
          "Kp": 0.100, "Ki": 0.010, "Kd": 0.005, "dt": 0.02},
        {"Type": "Sum", "Inputs": ["cmdYaw_ff", "cmdYaw_pid"], "Output": "cmdYaw"}
      ],

      "Allocator": [
        {"Type": "PseudoInverse",
          "Inputs": ["../cmdNorm", "../cmdRoll", "../cmdPitch", "../cmdYaw"],
          "Outputs": ["cmdFR_nd", "cmdAL_nd", "cmdFL_nd", "cmdAR_nd"],
          "Effectiveness": [
            [ 0.25000, 0.25000, 0.25000, 0.25000],
            [-0.25000, 0.25000, 0.25000,-0.25000],
            [ 0.25000,-0.25000, 0.25000,-0.25000],
            [ 0.25000, 0.25000,-0.25000,-0.25000]],
          "Min": [0.025, 0.025, 0.025, 0.025],
          "Max": [1.0, 1.0, 1.0, 1.0]
        }
      ]
    }
  },

  "Excitation": {
    "Time": "/Sensors/Fmu/Time_us",
    "ExciteDef": {
      "RTSM_att": {
        "Level": "Alloc",
        "Waveforms": [
          {
            "Wave": "OMS_1",
            "Signal": "/Control/Test/cmdRoll",
            "Start-Time": 1,
            "Scale-Factor": 0.025
          },
          {
            "Wave": "OMS_2",
            "Signal": "/Control/Test/cmdPitch",
            "Start-Time": 1,
            "Scale-Factor": 0.025
          },
          {
            "Wave": "OMS_3",
            "Signal": "/Control/Test/cmdYaw",
            "Start-Time": 1,
            "Scale-Factor": 0.025
          }
        ]
      },
      "RTSM_vert": {
        "Level": "Alloc",
        "Waveforms": [
          {
            "Wave": "OMS_4",
            "Signal": "/Control/Test/cmdNorm",
            "Start-Time": 1,
            "Scale-Factor": 1
          }
        ]
      }
    },

    "WaveDef": {
      "OMS_1": {
        "Type": "MultiSine",
        "Duration": 10.0,
        "Frequency": [ 0.6283185307179586, 4.360530603182633, 8.092742675647308, 11.824954748111981, 15.557166820576658, 19.28937889304133, 23.021590965506004, 26.753803037970677, 30.486015110435353, 34.21822718290002, 37.9504392553647, 41.682651327829376, 45.414863400294045, 49.14707547275872, 52.8792875452234, 56.61149961768807, 60.34371169015275 ],
        "Phase": [ 6.174200357528524, 5.448037839217776, 3.8454607850193847, 1.6650584957876886, 3.9242402680243402, 4.630080151304789, 5.912432865757586, 5.316652321008593, 2.7342570964241117, 6.546636801464082, 8.454702155760696, 8.24574027481253, 8.722410829390709, 7.878019406341706, 5.298703900733216, 7.7365320512089255, 9.81651753182983 ],
        "Amplitude": [ 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396, 0.19810717087274396 ]
      },
      "OMS_2": {
        "Type": "MultiSine",
        "Duration": 10.0,
        "Frequency": [ 1.872389221539517, 5.604601294004191, 9.336813366468867, 13.06902543893354, 16.801237511398217, 20.53344958386289, 24.265661656327563, 27.997873728792232, 31.73008580125691, 35.46229787372159, 39.19450994618626, 42.926722018650935, 46.65893409111561, 50.39114616358028, 54.12335823604496, 57.855570308509634, 61.5877823809743 ],
        "Phase": [ 0.11707077907146102, 5.879081252281665, 2.654293566021632, 6.39167677462466, 2.303111141503079, 2.800338003458348, 2.8375030086581976, 1.0089459497629825, 4.815200987699559, 1.6973325623185964, 2.783418143160966, 2.755628470222243, 2.1451236583654723, 6.926060216141984, 3.9516557880470744, 6.20624518523016, 1.2930439886508232 ],
        "Amplitude": [ 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514, 0.22691997229221514 ]
      },
      "OMS_3": {
        "Type": "MultiSine",
        "Duration": 10.0,
        "Frequency": [ 3.1164599123610746, 6.848671984825749, 10.580884057290424, 14.313096129755097, 18.045308202219775, 21.77752027468445, 25.509732347149118, 29.241944419613795, 32.97415649207847, 36.70636856454314, 40.43858063700782, 44.170792709472494, 47.90300478193716, 51.63521685440184, 55.36742892686651, 59.09964099933119, 62.83185307179586 ],
        "Phase": [ 6.211686565669407, 5.899844951398339, 3.505168117640797, 6.180092311325341, 8.254160205185341, 8.737306098422593, 9.388424380628422, 8.244859651857812, 5.6682884849905975, 8.788152243105346, 9.847341770112095, 9.543702569226786, 9.4984232787195, 7.611871646984754, 11.38939708047327, 14.142510674662724, 14.85221814913478 ],
        "Amplitude": [ 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345, 0.19694268116397345 ]
      },
      "OMS_4": {
        "Type": "LinearChirp",
        "Duration": 120,
        "AmpStart": 0.15625,
        "AmpEnd": 0.15625,
        "FreqStart": 0.628318531,
        "FreqEnd": 18.84955592
      }
    }
  },

  "Mission-Manager": {
    "Soc-Engage-Switch": {"Source": "/Sensors/Sbus/Channels/0", "Gain": 1,
      "ModeSel": {"Fmu": -2, "Soc": 0}},
    "Throttle-Safety-Switch": {"Source": "/Sensors/Sbus/Channels/1", "Gain": 1,
      "ModeSel": {"Safe": -2, "Engage": 0.5}},
    "Test-Mode-Switch": {"Source": "/Sensors/Sbus/Channels/8", "Gain": 1,
      "ModeSel": {"Standby": -2, "Arm": -0.5, "Engage": 0.5}},
    "Test-Select-Switch": {"Source": "/Sensors/Sbus/Channels/9", "Gain": 1,
      "ModeSel": {"Decrement": -2, "Excite": -0.5, "Increment": 0.5}},
    "Trigger-Switch": {"Source": "/Sensors/Sbus/Channels/10", "Gain": 1,
      "ModeSel": {"Standby": -2, "Trigger": 0.0}},

    "Baseline-Select-Switch": {"Source": "/Sensors/Sbus/Channels/11", "Gain": 1,
      "ControlSel": {"PilotRate": -2, "PilotRate": -0.5, "PilotAttitude": 0.5}},

    "Test-Points": [
      {"Test-ID": "0", "Sensor-Processing": "Standard", "Route": "Loiter", "Control": "PilotAttitude", "Excitation": "RTSM_att"},
      {"Test-ID": "1", "Sensor-Processing": "Standard", "Route": "Loiter", "Control": "PilotAttitude", "Excitation": "RTSM_vert"}
    ]
  }
}
